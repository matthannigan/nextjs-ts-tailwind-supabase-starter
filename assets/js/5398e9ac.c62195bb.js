"use strict";(self.webpackChunkdocs_website=self.webpackChunkdocs_website||[]).push([[946],{2624:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>d,contentTitle:()=>o,default:()=>p,frontMatter:()=>t,metadata:()=>s,toc:()=>c});const s=JSON.parse('{"id":"developer-guide/deployment","title":"Deployment","description":"This guide covers deploying your Next.js TS Tailwind Supabase Starter application to production environments.","source":"@site/docs/developer-guide/deployment.md","sourceDirName":"developer-guide","slug":"/developer-guide/deployment","permalink":"/nextjs-ts-tailwind-supabase-starter/developer-guide/deployment","draft":false,"unlisted":false,"editUrl":"https://github.com/matthannigan/nextjs-ts-tailwind-supabase-starter/tree/main/docs-website/docs/developer-guide/deployment.md","tags":[],"version":"current","frontMatter":{},"sidebar":"start","previous":{"title":"Testing","permalink":"/nextjs-ts-tailwind-supabase-starter/developer-guide/testing"},"next":{"title":"ESLint","permalink":"/nextjs-ts-tailwind-supabase-starter/developer-guide/tools/eslint"}}');var r=i(4848),l=i(8453);const t={},o="Deployment",d={},c=[{value:"Deployment Options",id:"deployment-options",level:2},{value:"Environment Setup",id:"environment-setup",level:2},{value:"Deploying to Vercel",id:"deploying-to-vercel",level:2},{value:"Steps:",id:"steps",level:3},{value:"Deploying to Netlify",id:"deploying-to-netlify",level:2},{value:"Steps:",id:"steps-1",level:3},{value:"Deploying with Docker",id:"deploying-with-docker",level:2},{value:"Creating a Dockerfile",id:"creating-a-dockerfile",level:3},{value:"Configuring Next.js for Docker",id:"configuring-nextjs-for-docker",level:3},{value:"Docker Compose (Optional)",id:"docker-compose-optional",level:3},{value:"Supabase Configuration for Production",id:"supabase-configuration-for-production",level:2},{value:"CI/CD Pipeline",id:"cicd-pipeline",level:2},{value:"GitHub Actions Example",id:"github-actions-example",level:3},{value:"Post-Deployment Checks",id:"post-deployment-checks",level:2},{value:"Performance Optimization",id:"performance-optimization",level:2},{value:"Monitoring and Analytics",id:"monitoring-and-analytics",level:2},{value:"Next Steps",id:"next-steps",level:2}];function a(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,l.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"deployment",children:"Deployment"})}),"\n",(0,r.jsx)(n.p,{children:"This guide covers deploying your Next.js TS Tailwind Supabase Starter application to production environments."}),"\n",(0,r.jsx)(n.h2,{id:"deployment-options",children:"Deployment Options"}),"\n",(0,r.jsx)(n.p,{children:"The starter template supports various deployment options:"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Vercel"})," (recommended for Next.js applications)"]}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.strong,{children:"Netlify"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.strong,{children:"AWS Amplify"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.strong,{children:"Docker + Self-hosted"})}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"environment-setup",children:"Environment Setup"}),"\n",(0,r.jsx)(n.p,{children:"Before deploying, ensure you have set up the following environment variables in your deployment environment:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"# Next.js\nNEXT_PUBLIC_APP_URL=https://your-app-domain.com\n\n# Supabase\nNEXT_PUBLIC_SUPABASE_URL=your-supabase-url\nNEXT_PUBLIC_SUPABASE_ANON_KEY=your-supabase-anon-key\nSUPABASE_SERVICE_ROLE_KEY=your-service-role-key\n"})}),"\n",(0,r.jsx)(n.h2,{id:"deploying-to-vercel",children:"Deploying to Vercel"}),"\n",(0,r.jsx)(n.p,{children:"Vercel is the platform created by the team behind Next.js and offers the most seamless deployment experience."}),"\n",(0,r.jsx)(n.h3,{id:"steps",children:"Steps:"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Push your code to a Git repository"})," (GitHub, GitLab, BitBucket)"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Connect your repository to Vercel"}),":"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Create a Vercel account at ",(0,r.jsx)(n.a,{href:"https://vercel.com",children:"vercel.com"})]}),"\n",(0,r.jsx)(n.li,{children:'Click "New Project" and import your repository'}),"\n",(0,r.jsx)(n.li,{children:'Select "Next.js" as the framework preset'}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Configure environment variables"}),":"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Add the environment variables mentioned above"}),"\n",(0,r.jsx)(n.li,{children:"You can set different values for production, preview, and development environments"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Deploy"}),":"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:'Click "Deploy" to trigger the initial deployment'}),"\n",(0,r.jsx)(n.li,{children:"Vercel will automatically build and deploy your application"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Set up automatic deployments"}),":"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"By default, Vercel deploys automatically on every push to the main branch"}),"\n",(0,r.jsx)(n.li,{children:"You can customize this behavior in the project settings"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"deploying-to-netlify",children:"Deploying to Netlify"}),"\n",(0,r.jsx)(n.p,{children:"Netlify is another popular option for deploying Next.js applications."}),"\n",(0,r.jsx)(n.h3,{id:"steps-1",children:"Steps:"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Push your code to a Git repository"})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Connect your repository to Netlify"}),":"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Create a Netlify account at ",(0,r.jsx)(n.a,{href:"https://netlify.com",children:"netlify.com"})]}),"\n",(0,r.jsx)(n.li,{children:'Click "New site from Git" and import your repository'}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Configure build settings"}),":"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Build command: ",(0,r.jsx)(n.code,{children:"npm run build"})]}),"\n",(0,r.jsxs)(n.li,{children:["Publish directory: ",(0,r.jsx)(n.code,{children:".next"})]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Configure environment variables"}),":"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Add the environment variables in the site settings"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Deploy"}),":"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:'Click "Deploy site" to trigger the initial deployment'}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Add the Netlify Next.js plugin"}),":"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Install the plugin with ",(0,r.jsx)(n.code,{children:"npm install -D @netlify/plugin-nextjs"})]}),"\n",(0,r.jsxs)(n.li,{children:["Add a ",(0,r.jsx)(n.code,{children:"netlify.toml"})," file to your project root:"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-toml",children:'[[plugins]]\n  package = "@netlify/plugin-nextjs"\n'})}),"\n",(0,r.jsx)(n.h2,{id:"deploying-with-docker",children:"Deploying with Docker"}),"\n",(0,r.jsx)(n.p,{children:"For self-hosted deployments, you can use Docker."}),"\n",(0,r.jsx)(n.h3,{id:"creating-a-dockerfile",children:"Creating a Dockerfile"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-dockerfile",children:'# Dockerfile\nFROM node:18-alpine AS base\n\n# Install dependencies only when needed\nFROM base AS deps\nWORKDIR /app\nCOPY package.json package-lock.json ./\nRUN npm ci\n\n# Rebuild the source code only when needed\nFROM base AS builder\nWORKDIR /app\nCOPY --from=deps /app/node_modules ./node_modules\nCOPY . .\nRUN npm run build\n\n# Production image, copy all the files and run next\nFROM base AS runner\nWORKDIR /app\n\nENV NODE_ENV production\n\nRUN addgroup --system --gid 1001 nodejs\nRUN adduser --system --uid 1001 nextjs\n\nCOPY --from=builder /app/public ./public\nCOPY --from=builder /app/.next/standalone ./\nCOPY --from=builder /app/.next/static ./.next/static\n\nUSER nextjs\n\nEXPOSE 3000\n\nENV PORT 3000\n\nCMD ["node", "server.js"]\n'})}),"\n",(0,r.jsx)(n.h3,{id:"configuring-nextjs-for-docker",children:"Configuring Next.js for Docker"}),"\n",(0,r.jsxs)(n.p,{children:["Update your ",(0,r.jsx)(n.code,{children:"next.config.js"})," to enable standalone mode:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",children:"/** @type {import('next').NextConfig} */\nconst nextConfig = {\n  output: 'standalone',\n  // ... other config\n};\n\nmodule.exports = nextConfig;\n"})}),"\n",(0,r.jsx)(n.h3,{id:"docker-compose-optional",children:"Docker Compose (Optional)"}),"\n",(0,r.jsx)(n.p,{children:"For local development with Docker:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:"# docker-compose.yml\nversion: '3'\nservices:\n  web:\n    build: .\n    ports:\n      - \"3000:3000\"\n    environment:\n      - NEXT_PUBLIC_SUPABASE_URL=your-supabase-url\n      - NEXT_PUBLIC_SUPABASE_ANON_KEY=your-supabase-anon-key\n"})}),"\n",(0,r.jsx)(n.h2,{id:"supabase-configuration-for-production",children:"Supabase Configuration for Production"}),"\n",(0,r.jsx)(n.p,{children:"When deploying to production, ensure your Supabase project is properly configured:"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Update authentication settings"}),":"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Set the Site URL to your production domain"}),"\n",(0,r.jsx)(n.li,{children:"Configure redirect URLs for authentication"}),"\n",(0,r.jsx)(n.li,{children:"Set up email templates for authentication emails"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Update Row Level Security policies"}),":"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Review and test RLS policies before deploying to production"}),"\n",(0,r.jsx)(n.li,{children:"Ensure all tables have appropriate RLS policies"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Database backups"}),":"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Set up regular database backups"}),"\n",(0,r.jsx)(n.li,{children:"Consider implementing point-in-time recovery"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"cicd-pipeline",children:"CI/CD Pipeline"}),"\n",(0,r.jsx)(n.p,{children:"The starter template can be integrated with popular CI/CD tools:"}),"\n",(0,r.jsx)(n.h3,{id:"github-actions-example",children:"GitHub Actions Example"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:"# .github/workflows/deploy.yml\nname: Deploy\n\non:\n  push:\n    branches: [main]\n\njobs:\n  deploy:\n    runs-on: ubuntu-latest\n    steps:\n      - uses: actions/checkout@v3\n      \n      - name: Setup Node.js\n        uses: actions/setup-node@v3\n        with:\n          node-version: '18'\n          cache: 'npm'\n          \n      - name: Install dependencies\n        run: npm ci\n        \n      - name: Run tests\n        run: npm test\n        \n      - name: Build\n        run: npm run build\n        \n      - name: Deploy to Vercel\n        uses: amondnet/vercel-action@v20\n        with:\n          vercel-token: ${{ secrets.VERCEL_TOKEN }}\n          vercel-org-id: ${{ secrets.VERCEL_ORG_ID }}\n          vercel-project-id: ${{ secrets.VERCEL_PROJECT_ID }}\n          vercel-args: '--prod'\n"})}),"\n",(0,r.jsx)(n.h2,{id:"post-deployment-checks",children:"Post-Deployment Checks"}),"\n",(0,r.jsx)(n.p,{children:"After deploying, perform these checks:"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Test authentication flows"})," in the production environment"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Verify database connections"})," are working correctly"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Check for any CORS issues"})," with Supabase"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Test protected routes"})," to ensure they're properly secured"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Verify environment variables"})," are correctly set"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"performance-optimization",children:"Performance Optimization"}),"\n",(0,r.jsx)(n.p,{children:"For production deployments, consider these optimizations:"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Enable Edge Runtime"})," for API routes where possible"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Implement ISR"})," (Incremental Static Regeneration) for frequently accessed pages"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Configure caching headers"})," for static assets"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Optimize images"})," using Next.js Image optimization"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Configure Content Security Policy"})," headers"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"monitoring-and-analytics",children:"Monitoring and Analytics"}),"\n",(0,r.jsx)(n.p,{children:"Consider adding:"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Error tracking"})," (Sentry, LogRocket)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Analytics"})," (Google Analytics, Plausible, Fathom)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Performance monitoring"})," (Vercel Analytics)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Uptime monitoring"})," (UptimeRobot, Pingdom)"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"next-steps",children:"Next Steps"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Check out the ",(0,r.jsx)(n.a,{href:"/nextjs-ts-tailwind-supabase-starter/developer-guide/version-reference",children:"Version Reference"})," for recommended versions of all dependencies"]}),"\n",(0,r.jsxs)(n.li,{children:["Read the ",(0,r.jsx)(n.a,{href:"/nextjs-ts-tailwind-supabase-starter/developer-guide/contributing",children:"Contributing"})," guide for information on contributing to the project"]}),"\n"]})]})}function p(e={}){const{wrapper:n}={...(0,l.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(a,{...e})}):a(e)}},8453:(e,n,i)=>{i.d(n,{R:()=>t,x:()=>o});var s=i(6540);const r={},l=s.createContext(r);function t(e){const n=s.useContext(l);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:t(e.components),s.createElement(l.Provider,{value:n},e.children)}}}]);